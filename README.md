# Telegram Context Bot

–ë–æ—Ç –¥–ª—è Telegram, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Ä–µ–∞–∫—Ü–∏–∏ üëç –≤ —á–∞—Ç–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ–±—Å—É–∂–¥–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é AI.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º–æ–≥–æ —á–∞—Ç–∞ –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–µ–∞–∫—Ü–∏–π üëç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (10-20 —Å–æ–æ–±—â–µ–Ω–∏–π) —Å —É—á—ë—Ç–æ–º —Ü–µ–ø–æ—á–µ–∫ –æ—Ç–≤–µ—Ç–æ–≤
- AI-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (Groq Llama 3.3 70B)
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ —Ü–µ–ª–µ–≤–æ–π –∫–∞–Ω–∞–ª

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Python 3.12**
- **aiogram 3.x** ‚Äî Telegram Bot API
- **SQLAlchemy 2.0** ‚Äî async ORM
- **SQLite** ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- **Groq API** ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π tier)
- **Docker** ‚Äî –¥–µ–ø–ª–æ–π

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose
- Telegram Bot Token (–æ—Ç [@BotFather](https://t.me/BotFather))
- Groq API Key (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/XXXDENDACION/tg-message-context.git
cd tg-message-context
```

### 2. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
cp .env.example .env
```

### 3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å `.env`

```env
# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=your_bot_token_here

# Chat IDs
SOURCE_CHAT_ID=-1001234567890
TARGET_CHANNEL_ID=-1001234567891

# Groq Configuration (free tier available)
GROQ_API_KEY=gsk_your-groq-api-key

# Context Settings
CONTEXT_MESSAGES_COUNT=20
```

#### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å |
|------------|--------------|
| `TELEGRAM_BOT_TOKEN` | –°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather) |
| `SOURCE_CHAT_ID` | –ü–µ—Ä–µ—Å–ª–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ —á–∞—Ç–∞ –≤ [@userinfobot](https://t.me/userinfobot) |
| `TARGET_CHANNEL_ID` | –ü–µ—Ä–µ—Å–ª–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞ –≤ [@userinfobot](https://t.me/userinfobot) |
| `GROQ_API_KEY` | [console.groq.com/keys](https://console.groq.com/keys) (–±–µ—Å–ø–ª–∞—Ç–Ω–æ) |

### 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∞ –±–æ—Ç–∞

1. **–í source-—á–∞—Ç–µ:**
   - –î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ –≤ —á–∞—Ç
   - –°–¥–µ–ª–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º (–Ω—É–∂–Ω–æ –¥–ª—è —á—Ç–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Ä–µ–∞–∫—Ü–∏–π)
   - –í @BotFather: `/setprivacy` ‚Üí Disable (—á—Ç–æ–±—ã –±–æ—Ç –≤–∏–¥–µ–ª –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è)

2. **–í target-–∫–∞–Ω–∞–ª–µ:**
   - –î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª
   - –î–∞—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π

### 5. –ó–∞–ø—É—Å—Ç–∏—Ç—å

```bash
docker-compose up --build
```

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤ —Ñ–æ–Ω–µ:

```bash
docker-compose up -d --build
```

## –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–±–µ–∑ Docker)

```bash
# –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv .venv
source .venv/bin/activate  # Linux/macOS
# –∏–ª–∏
.venv\Scripts\activate  # Windows

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -e .

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
python -m src.main
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # Entry point
‚îÇ   ‚îú‚îÄ‚îÄ config.py            # Pydantic settings
‚îÇ   ‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ handlers.py      # Message & reaction handlers
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py      # SQLAlchemy setup
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py        # Message model
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ repository.py    # CRUD operations
‚îÇ   ‚îú‚îÄ‚îÄ ai/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ groq_client.py   # Groq integration
‚îÇ   ‚îî‚îÄ‚îÄ services/
‚îÇ       ‚îî‚îÄ‚îÄ context_service.py # Business logic
‚îú‚îÄ‚îÄ tests/
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ pyproject.toml
‚îî‚îÄ‚îÄ .env.example
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```
1. –ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ source-—á–∞—Ç–∞ –≤ SQLite

2. –ü—Ä–∏ —Ä–µ–∞–∫—Ü–∏–∏ üëç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ:
   ‚îî‚îÄ‚îÄ –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî –æ—Ç–≤–µ—Ç –Ω–∞ —Å—Ç–∞—Ä–æ–µ ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ –Ω–∞—á–∞–ª—É —Ç—Ä–µ–¥–∞
   ‚îî‚îÄ‚îÄ –ó–∞–≥—Ä—É–∑–∫–∞ 20 —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞—á–∏–Ω–∞—è —Å —ç—Ç–æ–π —Ç–æ—á–∫–∏

3. Groq (Llama 3.3 70B) –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è:
   ‚îî‚îÄ‚îÄ –§–∏–ª—å—Ç—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –∫ —Ç–µ–º–µ
   ‚îî‚îÄ‚îÄ –ò—Å–∫–ª—é—á–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –æ–±—Å—É–∂–¥–µ–Ω–∏—è

4. –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –≤ target-–∫–∞–Ω–∞–ª
```

## –ü–æ—á–µ–º—É Groq?

- **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π tier** ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ use-cases
- **–ë—ã—Å—Ç—Ä—ã–π** ‚Äî inference –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –∂–µ–ª–µ–∑–µ (LPU)
- **Llama 3.3 70B** ‚Äî –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è open-source –º–æ–¥–µ–ª—å

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
